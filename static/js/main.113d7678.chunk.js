(this["webpackJsonpaudio-signal-phase-inversion"]=this["webpackJsonpaudio-signal-phase-inversion"]||[]).push([[0],{66:function(e,t,a){e.exports=a(77)},76:function(e,t){!function(){function e(){var e=this;return new Promise((function(t){var a=new FileReader;a.onload=function(){t(a.result)},a.readAsArrayBuffer(e)}))}File.prototype.arrayBuffer=File.prototype.arrayBuffer||e,Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||e}()},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),i=a.n(s),l=a(117),o=a(12),c={appName:"Audio Signal Phase Inversion",leftWaveShapeImage:"Left channel wave shape",rightWaveShapeImage:"Right channel wave shape",leftPhaseInvertedCheckbox:"INVERT L CHANNEL",rightPhaseInvertedCheckbox:"INVERT R CHANNEL",playButton:"PLAY",pauseButton:"PAUSE",stopButton:"STOP",fileChooseMessage:"CHOOSE AUDIO FILE",fileLoadMessage:"LOADING ..."},u={appName:"\u97f3\u58f0\u4fe1\u53f7\u306e\u4f4d\u76f8\u53cd\u8ee2",leftWaveShapeImage:"\u5de6\u30c1\u30e3\u30cd\u30eb\u306e\u6ce2\u5f62",rightWaveShapeImage:"\u53f3\u30c1\u30e3\u30cd\u30eb\u306e\u6ce2\u5f62",leftPhaseInvertedCheckbox:"\u5de6\u30c1\u30e3\u30cd\u30eb\u3092\u53cd\u8ee2",rightPhaseInvertedCheckbox:"\u53f3\u30c1\u30e3\u30cd\u30eb\u3092\u53cd\u8ee2",playButton:"\u518d\u751f",pauseButton:"\u4e00\u6642\u505c\u6b62",stopButton:"\u505c\u6b62",fileChooseMessage:"\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f",fileLoadMessage:"\u8aad\u307f\u8fbc\u307f\u4e2d ..."};function h(e){switch(e){case"en-US":return c;case"ja":return u}return c}var f=a(109),p=a(110),g=a(112),d=a(111),y=a(122),v=a(118);function m(e){return r.a.createElement("div",null,r.a.createElement(y.a,null,r.a.createElement(v.a,{native:!0,value:e.language,onChange:function(t){return e.setLanguage(t.target.value)},style:{color:"#FFF"},inputProps:{name:"language",id:"language-native-simple"}},r.a.createElement("option",{value:"en-us"},"English"),r.a.createElement("option",{value:"ja"},"\u65e5\u672c\u8a9e"))))}function b(e){return r.a.createElement("div",null,r.a.createElement(f.a,{style:{backgroundColor:"#555"}},r.a.createElement(p.a,{maxWidth:"sm"},r.a.createElement(d.a,null,r.a.createElement(m,{style:{marginLeft:"0",marginRight:"auto"},setLanguage:e.setLanguage,language:e.language}),r.a.createElement(g.a,{href:e.repositoryURL,style:{marginLeft:"auto",marginRight:"0",color:"#FFF"}},"View on GitHub")))),r.a.createElement(d.a,null))}var E=a(120),P=a(116),I=a(15),k=a.n(I),x=a(29),C=a(47),S=a(48);function j(e){for(var t=e.inputBuffer.numberOfChannels,a=[],n=[],r=0;r<t;r++)a[r]=e.inputBuffer.getChannelData(r),n[r]=e.outputBuffer.getChannelData(r);for(var s=0;s<this.bufferSize;s++)for(var i=0;i<t;i++)n[i][s]=this.phaseValues[i%2]*a[i][s]}var O=function(){function e(t){Object(C.a)(this,e),this.ac=void 0,this.buffer=void 0,this.source=void 0,this.processor=void 0,this.analyser=void 0,this.isReadyToPlay=void 0,this.isPlaying=void 0,this.phaseValues=void 0,this.playbackDuration=void 0,this.totalPlaybackDuration=void 0,this.setIsReadyToPlay=void 0,this.setIsPlaying=void 0,this.setIsLeftPhaseInverted=void 0,this.setIsRightPhaseInverted=void 0,this.setAnalyser=void 0,this.ac=null,this.buffer=null,this.source=null,this.processor=null,this.analyser=null,this.isReadyToPlay=!1,this.isPlaying=!1,this.phaseValues=[1,1],this.playbackDuration=0,this.totalPlaybackDuration=0,this.setIsReadyToPlay=t.setIsReadyToPlay,this.setIsPlaying=t.setIsPlaying,this.setIsLeftPhaseInverted=t.setIsLeftPhaseInverted,this.setIsRightPhaseInverted=t.setIsRightPhaseInverted,this.setAnalyser=t.setAnalyser}return Object(S.a)(e,[{key:"load",value:function(){var e=Object(x.a)(k.a.mark((function e(t){var a,n=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isPlaying&&this.stop(),this.ac=null,this.buffer=null,this.setIsReadyToPlay(this.isReadyToPlay=!1),this.setAnalyser(null),e.prev=5,a=window.AudioContext||window.webkitAudioContext,this.ac=new a,this.ac.decodeAudioData(t,(function(e){n.buffer=e,n.setIsReadyToPlay(n.isReadyToPlay=!0)})),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),e.t0;case 14:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"prepare",value:function(){var e=Object(x.a)(k.a.mark((function e(){var t=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ac&&this.buffer){e.next=2;break}return e.abrupt("return");case 2:if(!this.ac.audioWorklet){e.next=8;break}return e.next=5,this.ac.audioWorklet.addModule("PhaseInverter.js");case 5:this.processor=new AudioWorkletNode(this.ac,"PhaseInverter"),e.next=10;break;case 8:this.processor=this.ac.createScriptProcessor(4096),this.processor.onaudioprocess=j.bind({bufferSize:this.processor.bufferSize,phaseValues:this.phaseValues});case 10:this.source=this.ac.createBufferSource(),this.source.buffer=this.buffer,this.source.onended=function(){t.isPlaying&&t.stop()},this.analyser=this.ac.createAnalyser(),this.source.connect(this.processor),this.processor.connect(this.analyser),this.analyser.connect(this.ac.destination),this.setAnalyser(this.analyser);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"play",value:function(){var e=Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.prepare();case 2:if(this.ac&&this.source){e.next=4;break}return e.abrupt("return");case 4:this.source.start(0,this.totalPlaybackDuration),this.playbackDuration=this.ac.currentTime,this.setIsPlaying(this.isPlaying=!0);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){this.ac&&(this.playbackDuration=this.ac.currentTime-this.playbackDuration,this.totalPlaybackDuration+=this.playbackDuration,this.setIsPlaying(this.isPlaying=!1),this.source&&this.source.stop())}},{key:"stop",value:function(){this.playbackDuration=0,this.totalPlaybackDuration=0,this.setIsPlaying(this.isPlaying=!1),this.source&&this.source.stop()}},{key:"invertLeftPhase",value:function(){if(this.phaseValues[0]=1===this.phaseValues[0]?-1:1,this.setIsLeftPhaseInverted(-1===this.phaseValues[0]),this.processor&&!(this.processor instanceof ScriptProcessorNode)){var e=this.processor.parameters.get("leftPhaseInverted");e&&(e.value=this.phaseValues[0])}}},{key:"invertRightPhase",value:function(){if(this.phaseValues[1]=1===this.phaseValues[1]?-1:1,this.setIsRightPhaseInverted(-1===this.phaseValues[1]),this.processor&&!(this.processor instanceof ScriptProcessorNode)){var e=this.processor.parameters.get("rightPhaseInverted");e&&(e.value=this.phaseValues[1])}}}]),e}();function w(e){return r.a.createElement("div",null,r.a.createElement("h1",{style:{fontSize:"16pt",margin:"16pt 0 8pt"}},h(e.language).appName))}var R=a(113);function L(){return(L=Object(x.a)(k.a.mark((function e(t,a,n){var r,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return");case 2:if(r=t.item(0)){e.next=5;break}return e.abrupt("return");case 5:return n(r.name),e.next=8,r.arrayBuffer();case 8:s=e.sent,a(s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),s=a[0],i=a[1],l=Object(n.useState)(""),c=Object(o.a)(l,2),u=c[0],f=c[1];return Object(n.useEffect)((function(){e.ready&&f(s)}),[e.ready,f,s]),Object(n.useEffect)((function(){e.ready||f(h(e.language).fileChooseMessage)}),[e.ready,e.language,f]),r.a.createElement("div",null,r.a.createElement(R.a,{component:"label",style:{margin:"16pt 0 8pt",color:"#FFF",backgroundColor:"#C11"}},u,r.a.createElement("input",{type:"file",id:"file-picker-button",onChange:function(t){f(h(e.language).fileLoadMessage),function(e,t,a){L.apply(this,arguments)}(t.target.files,e.onLoad,i)},style:{display:"none"}})))}var A=a(121),B=a(114);function F(e){return r.a.createElement("div",null,r.a.createElement(B.a,{label:"left"===e.channel?h(e.language).leftPhaseInvertedCheckbox:h(e.language).rightPhaseInvertedCheckbox,control:r.a.createElement(A.a,{checked:e.checked,onChange:function(){return e.onChange()}})}))}var T=a(115),V=a(49),N=a.n(V);function W(e){return r.a.createElement("div",null,r.a.createElement(T.a,{autoFocus:!0,onClick:e.onClick,"aria-label":h(e.language).pauseButton,disabled:e.disabled,color:"primary"},r.a.createElement(N.a,{style:e.disabled?{fontSize:32,color:"#777"}:{fontSize:32,color:"#000"}})))}var z=a(50),M=a.n(z);function U(e){return r.a.createElement("div",null,r.a.createElement(T.a,{autoFocus:!0,onClick:e.onClick,"aria-label":h(e.language).playButton,disabled:e.disabled,color:"primary"},r.a.createElement(M.a,{style:e.disabled?{fontSize:32,color:"#777"}:{fontSize:32,color:"#000"}})))}var H=a(51),G=a.n(H);function J(e){return r.a.createElement("div",null,r.a.createElement(T.a,{onClick:e.onClick,"aria-label":h(e.language).stopButton,disabled:e.disabled,color:"primary"},r.a.createElement(G.a,{style:e.disabled?{fontSize:32,color:"#777"}:{fontSize:32,color:"#000"}})))}function q(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(e.analyser&&t&&t.current){var a=t.current.getContext("2d");if(a){var n=setInterval((function(){!function(e,t,a){if(null!==a){var n=new Uint8Array(256);a.getByteTimeDomainData(n),t.fillStyle="#000000",t.fillRect(0,0,256,256),t.fillStyle="#FFF";for(var r=0;r<256;r+=2)t.fillRect(r,128,1,128-n[r+e])}}("left"===e.channel?0:1,a,e.analyser)}),100);return function(){clearInterval(n)}}}}),[e.channel,e.analyser]),r.a.createElement("div",null,r.a.createElement("canvas",{"aria-label":"left"===e.channel?h(e.language).leftWaveShapeImage:h(e.language).rightWaveShapeImage,ref:t,width:256,height:256,style:{width:"128px",height:"128px",background:"#000"}},"left"===e.channel?h(e.language).leftWaveShapeImage:h(e.language).rightWaveShapeImage))}function Y(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),s=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(o.a)(l,2),u=c[0],h=c[1],f=Object(n.useState)(!1),g=Object(o.a)(f,2),d=g[0],y=g[1],v=Object(n.useState)(!1),m=Object(o.a)(v,2),b=m[0],I=m[1],k=Object(n.useState)(null),x=Object(o.a)(k,2),C=x[0],S=x[1],j=Object(n.useMemo)((function(){return new O({setIsReadyToPlay:i,setIsPlaying:h,setIsLeftPhaseInverted:y,setIsRightPhaseInverted:I,setAnalyser:S})}),[i,h,y,I,S]);return r.a.createElement("div",null,r.a.createElement(p.a,{maxWidth:"sm"},r.a.createElement(E.a,{display:"flex",flexDirection:"column"},r.a.createElement(E.a,{display:"flex",justifyContent:"center"},r.a.createElement(w,{language:e.language}))),r.a.createElement(E.a,{display:"flex",flexDirection:"column"},r.a.createElement(E.a,{display:"flex",justifyContent:"center"},r.a.createElement(q,{channel:"left",analyser:C,language:e.language}),r.a.createElement(q,{channel:"right",analyser:C,language:e.language}))),r.a.createElement(E.a,{display:"flex",flexDirection:"column"},r.a.createElement(E.a,{display:"flex",justifyContent:"center"},u?r.a.createElement(W,{onClick:function(){return j.pause()},disabled:!s,language:e.language}):r.a.createElement(U,{onClick:function(){return j.play()},disabled:!s,language:e.language}),r.a.createElement(J,{onClick:function(){return j.stop()},disabled:!s,language:e.language}))),r.a.createElement(P.a,null),r.a.createElement(E.a,{display:"flex",flexDirection:"column"},r.a.createElement(E.a,{display:"flex",justifyContent:"center"},r.a.createElement(F,{channel:"left",checked:d,onChange:function(){return j.invertLeftPhase()},language:e.language}),r.a.createElement(F,{channel:"right",checked:b,onChange:function(){return j.invertRightPhase()},language:e.language}))),r.a.createElement(P.a,null),r.a.createElement(E.a,{display:"flex",flexDirection:"column"},r.a.createElement(E.a,{display:"flex",justifyContent:"center"},r.a.createElement(D,{ready:s,onLoad:j.load.bind(j),language:e.language})))))}function K(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)(""),l=Object(o.a)(i,2),c=l[0],u=l[1];return Object(n.useEffect)((function(){if(!a){var e=window.location.hash.toString().replace(/^#/,"");u(e),s(!0),""!==e&&(document.title=h(e).appName)}})),Object(n.useEffect)((function(){if(""!==c){var e=window.location.hash.toString(),t=window.location.href.replace(e,"");window.location.href=t+"#"+c,document.title=h(c).appName}}),[c]),r.a.createElement("div",null,r.a.createElement(b,{repositoryURL:"https://github.com/moutend/AudioWebApp/PhaseInvert/",setLanguage:u,language:c}),r.a.createElement(Y,{language:c}))}a(76);i.a.render(r.a.createElement("div",null,r.a.createElement(l.a,null),r.a.createElement(K,null)),document.querySelector("#root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.113d7678.chunk.js.map